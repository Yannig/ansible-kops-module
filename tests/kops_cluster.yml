---

- name: "Tests kops cluster"
  hosts: localhost
  connection: local
  vars:
    cluster_name: "test.fqdn"
    cluster_zones: "us-east-1a"
  gather_facts: no
  tasks:

    - name: "Delete kops cluster"
      kops_cluster:
        name: "{{ cluster_name }}"
        state: absent

    - name: "Create kops cluster"
      kops_cluster:
        name: "{{ cluster_name }}"
        cloud: "aws" # default
        zones:  "{{ cluster_zones }}"
        state: present

    - name: "Delete kops cluster"
      kops_cluster:
        name: "{{ cluster_name }}"
        state: absent
